(()=>{var e={};e.id=939,e.ids=[939],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},75454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(97264),s(54603),s(11506),s(35866);var r=s(23191),a=s(88716),l=s(37922),n=s.n(l),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["admin",{children:["grow-logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97264)),"/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/app/admin/grow-logs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,54603)),"/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/app/admin/grow-logs/page.tsx"],u="/admin/grow-logs/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/grow-logs/page",pathname:"/admin/grow-logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67994:(e,t,s)=>{Promise.resolve().then(s.bind(s,62432)),Promise.resolve().then(s.bind(s,62122)),Promise.resolve().then(s.bind(s,48560))},62432:(e,t,s)=>{"use strict";s.d(t,{AdminGrowLogsFilters:()=>p});var r=s(10326),a=s(17577),l=s(35047),n=s(88307),i=s(21021),o=s(84231),d=s(38690),c=s(3679),u=s(96038);function p(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),[s,p]=(0,a.useState)(t.get("search")||""),[x,m]=(0,a.useState)(t.get("stage")||"");function h(){let r=new URLSearchParams;s&&r.set("search",s),x&&r.set("stage",x),t.get("user")&&r.set("user",t.get("user")||""),e.push(`/admin/grow-logs?${r.toString()}`)}return r.jsx(i.Z,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[r.jsx("div",{className:"flex-1 w-full",children:r.jsx(o.I,{label:"Search by strain or user email",placeholder:"Blue Oyster or user@example.com",value:s,onChange:e=>p(e.target.value),icon:r.jsx(n.Z,{className:"w-5 h-5"}),onKeyDown:e=>{"Enter"===e.key&&h()}})}),r.jsx("div",{className:"flex-1 w-full",children:r.jsx(d.P,{label:"Filter by stage",options:[{value:"",label:"All Stages"},...u.cu.map(e=>({value:e,label:e}))],value:x,onChange:m})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(c.Button,{onClick:h,variant:"primary",size:"medium",children:"Apply"}),r.jsx(c.Button,{onClick:function(){let s=new URLSearchParams;t.get("user")&&s.set("user",t.get("user")||""),e.push(`/admin/grow-logs?${s.toString()}`)},variant:"ghost",size:"medium",children:"Clear"})]})]})})}},62122:(e,t,s)=>{"use strict";s.d(t,{AdminLogRow:()=>o});var r=s(10326),a=s(35047),l=s(2453),n=s(85833),i=s(3679);function o({log:e}){let t=(0,a.useRouter)();return(0,r.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors cursor-pointer",onClick:()=>t.push(`/dashboard/grow-logs/${e.id}`),children:[r.jsx("td",{className:"px-6 py-4 text-sm text-neutral-900",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.user_profile?.email||"Unknown"}),e.user_profile?.full_name&&r.jsx("p",{className:"text-xs text-neutral-500",children:e.user_profile.full_name})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-neutral-900",children:(0,l.WU)(new Date(e.log_date),"MMM dd, yyyy")}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-neutral-900",children:e.strain}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(n.C,{variant:"default",children:e.growth_stage})}),r.jsx("td",{className:"px-6 py-4 text-sm text-neutral-600",children:e.growing_method}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-20 h-2 bg-neutral-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${e.data_completeness_score}%`}})}),(0,r.jsxs)("span",{className:"text-xs text-neutral-600 w-12",children:[e.data_completeness_score,"%"]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",onClick:e=>e.stopPropagation(),children:r.jsx(i.Button,{variant:"ghost",size:"small",onClick:()=>t.push(`/dashboard/grow-logs/${e.id}`),children:"View"})})]})}},85833:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var r=s(10326),a=s(11105);function l({variant:e,children:t,className:s}){return r.jsx("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-3 py-1 text-xs font-medium",{bronze:"bg-neutral-200 text-neutral-700",silver:"bg-neutral-300 text-neutral-800",gold:"bg-yellow-100 text-yellow-800",success:"bg-success-100 text-success-700",default:"bg-neutral-100 text-neutral-700"}[e],s),children:t})}},84231:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(10326),a=s(17577),l=s(11105);let n=(0,a.forwardRef)(({label:e,error:t,icon:s,className:a,id:n,...i},o)=>{let d=n||`input-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"w-full",children:[e&&(0,r.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-neutral-900 mb-2",children:[e,i.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[s&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",children:s}),r.jsx("input",{ref:o,id:d,className:(0,l.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900 placeholder-neutral-400","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed",s&&"pl-10",t&&"border-red-300 focus:border-red-400 focus:ring-red-100",a),...i})]}),t&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]})});n.displayName="Input"},38690:(e,t,s)=>{"use strict";s.d(t,{P:()=>i});var r=s(10326),a=s(17577);let l=(0,s(62881).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var n=s(11105);let i=(0,a.forwardRef)(({label:e,error:t,options:s,className:a,id:i,onChange:o,value:d,...c},u)=>{let p=i||`select-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"w-full",children:[e&&(0,r.jsxs)("label",{htmlFor:p,className:"block text-sm font-medium text-neutral-900 mb-2",children:[e,c.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("select",{ref:u,id:p,value:d,className:(0,n.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed","appearance-none pr-10",t&&"border-red-300 focus:border-red-400 focus:ring-red-100",a),onChange:e=>{o&&o(e.target.value)},...c,children:s.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:r.jsx(l,{className:"w-5 h-5"})})]}),t&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]})});i.displayName="Select"},96038:(e,t,s)=>{"use strict";s.d(t,{Hk:()=>a,KN:()=>o,cu:()=>r,iJ:()=>i,jp:()=>l,ny:()=>n});let r=["Inoculation","Colonization","Fruiting","Harvest"],a=["Blue Oyster","Golden Oyster","Pink Oyster","King Oyster","Phoenix Oyster","Shiitake","Lion's Mane","Reishi","Maitake","Enoki","Chestnut","Wine Cap","Turkey Tail","Button/Portobello","Nameko","Pioppino","Other"],l=["Coco Coir","Coco+Verm","CVG","Manure-based","Straw","Hardwood","Master's Mix","BRF","Rye Grain","Wild Bird Seed","Uncle Ben's","Popcorn","Other"],n=["Liquid Culture","Spore Syringe","Agar Transfer","G2G","Spore Print","Clone","Sawdust Spawn","Other"],i=["Monotub","SGFC","Fruiting Bag","Martha Tent","Shoebox","Hydroponics","Open Air","Other"],o=["PF Tek","Uncle Ben's","G2G","Agar","Liquid Culture","Shoebox","Broke Boi","BRF Cakes","Bulk Substrate","Monotub Tek","Other"]},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},97264:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(19510),a=s(58585),l=s(19692),n=s(66601),i=s(68570);let o=(0,i.createProxy)(String.raw`/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/components/admin/AdminGrowLogsFilters.tsx#AdminGrowLogsFilters`),d=(0,i.createProxy)(String.raw`/Users/pouya/Desktop/Apps/spawnify/spawnify-mvp/components/admin/AdminLogRow.tsx#AdminLogRow`);var c=s(58047);async function u({searchParams:e}){let t=(0,l.e)(),{data:{user:s}}=await t.auth.getUser();s||(0,a.redirect)("/admin/login");let{data:i}=await t.from("admin_users").select("role").eq("user_id",s.id).single();i||(0,a.redirect)("/dashboard");let u=t.from("grow_logs").select("*",{count:"exact"}).order("created_at",{ascending:!1});e.search&&(u=u.or(`strain.ilike.%${e.search}%`)),e.stage&&(u=u.eq("growth_stage",e.stage)),e.user&&(u=u.eq("user_id",e.user));let{data:p,count:x}=await u,m=p||[],h=[...new Set(m.map(e=>e.user_id))],{data:g}=await t.from("user_profiles").select("id, email, full_name").in("id",h),f=new Map((g||[]).map(e=>[e.id,e])),y=m.map(e=>({...e,user_profile:f.get(e.user_id)})),b=y;if(e.search){let t=e.search.toLowerCase();b=y.filter(e=>{let s=e.user_profile?.email?.toLowerCase()||"";return e.strain.toLowerCase().includes(t)||s.includes(t)})}return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-neutral-900 tracking-tight",children:"All Grow Logs"}),(0,r.jsxs)("p",{className:"text-neutral-600 mt-1",children:[x||0," total logs"]})]}),r.jsx(c.b,{logs:b})]}),r.jsx(o,{}),b&&b.length>0?r.jsx(n.Z,{className:"overflow-hidden p-0",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"User"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"Date"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"Strain"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"Stage"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"Method"}),r.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-neutral-600",children:"Completeness"}),r.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-600",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-neutral-200",children:b.map(e=>r.jsx(d,{log:e},e.id))})]})})}):r.jsx(n.Z,{className:"p-12 text-center",children:r.jsx("p",{className:"text-neutral-600",children:"No grow logs found"})})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,281,236,545,958,283,453,527],()=>s(75454));module.exports=r})();