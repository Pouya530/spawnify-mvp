(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{6279:function(e,t,r){Promise.resolve().then(r.bind(r,53452)),Promise.resolve().then(r.bind(r,82824)),Promise.resolve().then(r.bind(r,12241))},53452:function(e,t,r){"use strict";r.d(t,{AdminGrowLogsFilters:function(){return m}});var n=r(57437),a=r(2265),s=r(99376),l=r(73247),i=r(99178),o=r(38068),u=r(70311),c=r(84226),d=r(66076);function m(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),[r,m]=(0,a.useState)(t.get("search")||""),[h,x]=(0,a.useState)(t.get("stage")||"");function p(){let n=new URLSearchParams;r&&n.set("search",r),h&&n.set("stage",h),t.get("user")&&n.set("user",t.get("user")||""),e.push("/admin/grow-logs?".concat(n.toString()))}return(0,n.jsx)(i.Z,{className:"p-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[(0,n.jsx)("div",{className:"flex-1 w-full",children:(0,n.jsx)(o.I,{label:"Search by strain or user email",placeholder:"Blue Oyster or user@example.com",value:r,onChange:e=>m(e.target.value),icon:(0,n.jsx)(l.Z,{className:"w-5 h-5"}),onKeyDown:e=>{"Enter"===e.key&&p()}})}),(0,n.jsx)("div",{className:"flex-1 w-full",children:(0,n.jsx)(u.P,{label:"Filter by stage",options:[{value:"",label:"All Stages"},...d.cu.map(e=>({value:e,label:e}))],value:h,onChange:x})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.Button,{onClick:p,variant:"primary",size:"medium",children:"Apply"}),(0,n.jsx)(c.Button,{onClick:function(){let r=new URLSearchParams;t.get("user")&&r.set("user",t.get("user")||""),e.push("/admin/grow-logs?".concat(r.toString()))},variant:"ghost",size:"medium",children:"Clear"})]})]})})}},82824:function(e,t,r){"use strict";r.d(t,{AdminLogRow:function(){return o}});var n=r(57437),a=r(99376),s=r(64014),l=r(69379),i=r(84226);function o(e){var t,r;let{log:o}=e,u=(0,a.useRouter)();return(0,n.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors cursor-pointer",onClick:()=>u.push("/dashboard/grow-logs/".concat(o.id)),children:[(0,n.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-900",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:(null===(t=o.user_profile)||void 0===t?void 0:t.email)||"Unknown"}),(null===(r=o.user_profile)||void 0===r?void 0:r.full_name)&&(0,n.jsx)("p",{className:"text-xs text-neutral-500",children:o.user_profile.full_name})]})}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-900",children:(0,s.WU)(new Date(o.log_date),"MMM dd, yyyy")}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-neutral-900",children:o.strain}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)(l.C,{variant:"default",children:o.growth_stage})}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm text-neutral-600",children:o.growing_method}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-20 h-2 bg-neutral-200 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full bg-primary-500 transition-all",style:{width:"".concat(o.data_completeness_score,"%")}})}),(0,n.jsxs)("span",{className:"text-xs text-neutral-600 w-12",children:[o.data_completeness_score,"%"]})]})}),(0,n.jsx)("td",{className:"px-6 py-4 text-right",onClick:e=>e.stopPropagation(),children:(0,n.jsx)(i.Button,{variant:"ghost",size:"small",onClick:()=>u.push("/dashboard/grow-logs/".concat(o.id)),children:"View"})})]})}},12241:function(e,t,r){"use strict";r.d(t,{ExportDataButton:function(){return o}});var n=r(57437),a=r(2265);let s=(0,r(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var l=r(84226),i=r(64014);function o(e){let{logs:t,variant:o="primary",size:u="medium"}=e,[c,d]=(0,a.useState)(!1);async function m(){d(!0);try{let e=t;if(!e||0===e.length){let{createClient:t}=await Promise.all([r.e(452),r.e(970)]).then(r.bind(r,10970)),n=t(),{data:a}=await n.from("grow_logs").select("*").order("created_at",{ascending:!1});e=a||[]}if(!e||0===e.length){alert("No data to export"),d(!1);return}let n=function(e){let t=["id","growth_stage","log_date","strain","substrate","substrate_ratio","inoculation_method","inoculation_details","growing_method","tek_method","temperature","humidity","ph_level","weight","light_hours_daily","data_completeness_score","created_at"],r=e.map(e=>t.map(t=>{let r=e[t];if(null==r)return"";if("log_date"===t||"created_at"===t)return r?(0,i.WU)(new Date(r),"yyyy-MM-dd"):"";let n=String(r);return n.includes(",")||n.includes('"')||n.includes("\n")?'"'.concat(n.replace(/"/g,'""'),'"'):n}).join(","));return[t.join(","),...r].join("\n")}(e),a="spawnify-data-".concat((0,i.WU)(new Date,"yyyy-MM-dd"),".csv");!function(e,t){let r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}(n,a)}catch(e){console.error("Export error:",e),alert("Failed to export data. Please try again.")}finally{d(!1)}}return(0,n.jsxs)(l.Button,{variant:o,size:u,onClick:m,loading:c,disabled:c,className:"medium"===u?"w-full":"",children:[(0,n.jsx)(s,{className:"w-4 h-4 mr-2"}),"Export to CSV"]})}},69379:function(e,t,r){"use strict";r.d(t,{C:function(){return s}});var n=r(57437),a=r(47984);function s(e){let{variant:t,children:r,className:s}=e;return(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-3 py-1 text-xs font-medium",{bronze:"bg-neutral-200 text-neutral-700",silver:"bg-neutral-300 text-neutral-800",gold:"bg-yellow-100 text-yellow-800",success:"bg-success-100 text-success-700",default:"bg-neutral-100 text-neutral-700"}[t],s),children:r})}},84226:function(e,t,r){"use strict";r.d(t,{Button:function(){return o}});var n=r(57437),a=r(2265),s=r(27648),l=r(51817),i=r(47984);let o=(0,a.forwardRef)((e,t)=>{let{variant:r="primary",size:a="medium",loading:o=!1,className:u,children:c,disabled:d,href:m,...h}=e,x=(0,i.cn)("inline-flex items-center justify-center rounded-xl font-medium transition-standard focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-primary-500 text-white shadow-lg shadow-primary-500/25 hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-neutral-100 text-neutral-900 border border-neutral-200 hover:bg-neutral-200 focus:ring-neutral-500",ghost:"bg-transparent text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500"}[r],{small:"px-4 py-2 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"}[a],o&&"cursor-wait",u);return m?(0,n.jsx)(s.default,{href:m,className:x,children:c}):(0,n.jsx)("button",{ref:t,className:x,disabled:d||o,...h,children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):c})});o.displayName="Button"},99178:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(57437),a=r(47984);function s(e){let{children:t,hover:r=!1,padding:s="medium",className:l}=e;return(0,n.jsx)("div",{className:(0,a.cn)("bg-white border border-neutral-200 rounded-2xl shadow-sm",{small:"p-4",medium:"p-6 md:p-8",large:"p-8 md:p-12"}[s],r&&"transition-standard hover:border-primary-400 hover:shadow-lg hover:shadow-primary-500/10",l),children:t})}},38068:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(57437),a=r(2265),s=r(47984);let l=(0,a.forwardRef)((e,t)=>{let{label:r,error:a,icon:l,className:i,id:o,...u}=e,c=o||"input-".concat(Math.random().toString(36).substr(2,9));return(0,n.jsxs)("div",{className:"w-full",children:[r&&(0,n.jsxs)("label",{htmlFor:c,className:"block text-sm font-medium text-neutral-900 mb-2",children:[r,u.required&&(0,n.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,n.jsxs)("div",{className:"relative",children:[l&&(0,n.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",children:l}),(0,n.jsx)("input",{ref:t,id:c,className:(0,s.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900 placeholder-neutral-400","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed",l&&"pl-10",a&&"border-red-300 focus:border-red-400 focus:ring-red-100",i),...u})]}),a&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})});l.displayName="Input"},70311:function(e,t,r){"use strict";r.d(t,{P:function(){return i}});var n=r(57437),a=r(2265);let s=(0,r(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var l=r(47984);let i=(0,a.forwardRef)((e,t)=>{let{label:r,error:a,options:i,className:o,id:u,onChange:c,value:d,...m}=e,h=u||"select-".concat(Math.random().toString(36).substr(2,9));return(0,n.jsxs)("div",{className:"w-full",children:[r&&(0,n.jsxs)("label",{htmlFor:h,className:"block text-sm font-medium text-neutral-900 mb-2",children:[r,m.required&&(0,n.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("select",{ref:t,id:h,value:d,className:(0,l.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed","appearance-none pr-10",a&&"border-red-300 focus:border-red-400 focus:ring-red-100",o),onChange:e=>{c&&c(e.target.value)},...m,children:i.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:(0,n.jsx)(s,{className:"w-5 h-5"})})]}),a&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]})});i.displayName="Select"},66076:function(e,t,r){"use strict";r.d(t,{Hk:function(){return a},KN:function(){return o},cu:function(){return n},iJ:function(){return i},jp:function(){return s},ny:function(){return l}});let n=["Inoculation","Colonization","Fruiting","Harvest"],a=["Blue Oyster","Golden Oyster","Pink Oyster","King Oyster","Phoenix Oyster","Shiitake","Lion's Mane","Reishi","Maitake","Enoki","Chestnut","Wine Cap","Turkey Tail","Button/Portobello","Nameko","Pioppino","Other"],s=["Coco Coir","Coco+Verm","CVG","Manure-based","Straw","Hardwood","Master's Mix","BRF","Rye Grain","Wild Bird Seed","Uncle Ben's","Popcorn","Other"],l=["Liquid Culture","Spore Syringe","Agar Transfer","G2G","Spore Print","Clone","Sawdust Spawn","Other"],i=["Monotub","SGFC","Fruiting Bag","Martha Tent","Shoebox","Hydroponics","Open Air","Other"],o=["PF Tek","Uncle Ben's","G2G","Agar","Liquid Culture","Shoebox","Broke Boi","BRF Cakes","Bulk Substrate","Monotub Tek","Other"]},47984:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[972,105,14,971,117,744],function(){return e(e.s=6279)}),_N_E=e.O()}]);