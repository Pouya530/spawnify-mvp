(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[339,970],{69982:function(e,t,r){Promise.resolve().then(r.bind(r,5490)),Promise.resolve().then(r.bind(r,78321)),Promise.resolve().then(r.bind(r,39849)),Promise.resolve().then(r.bind(r,71708)),Promise.resolve().then(r.bind(r,84226)),Promise.resolve().then(r.t.bind(r,65878,23)),Promise.resolve().then(r.t.bind(r,72972,23))},5490:function(e,t,r){"use strict";r.d(t,{CompletenessChart:function(){return c}});var n=r(57437),s=r(47625),a=r(75169),o=r(3574),l=r(20407),i=r(8147),d=r(22190);function c(e){let{score:t}=e,r=[{name:"Complete",value:t,color:"#14B8A6"},{name:"Missing",value:100-t,color:"#E5E5E5"}];return(0,n.jsxs)("div",{className:"w-full h-64",children:[(0,n.jsx)(s.h,{width:"100%",height:"100%",children:(0,n.jsxs)(a.u,{children:[(0,n.jsx)(o.b,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:2,dataKey:"value",startAngle:90,endAngle:-270,children:r.map((e,t)=>(0,n.jsx)(l.b,{fill:e.color},"cell-".concat(t)))}),(0,n.jsx)(i.u,{formatter:e=>"".concat(e,"%"),contentStyle:{backgroundColor:"#fff",border:"1px solid #E5E5E5",borderRadius:"0.5rem",padding:"0.5rem"}}),(0,n.jsx)(d.D,{verticalAlign:"bottom",height:36,formatter:e=>(0,n.jsx)("span",{className:"text-sm text-neutral-600",children:e})})]})}),(0,n.jsxs)("div",{className:"text-center mt-4",children:[(0,n.jsxs)("p",{className:"text-2xl font-bold text-neutral-900",children:[t,"%"]}),(0,n.jsx)("p",{className:"text-sm text-neutral-600",children:"Data Completeness"})]})]})}},78321:function(e,t,r){"use strict";r.d(t,{DeleteLogButton:function(){return m}});var n=r(57437),s=r(2265),a=r(99376),o=r(76865),l=r(18930),i=r(10970),d=r(84226),c=r(99178);async function u(e,t){let r=(0,i.createClient)();for(let t of e)try{let e=t.split("/grow-photos/");if(2===e.length){let t=e[1],{error:n}=await r.storage.from("grow-photos").remove([t]);n&&console.error("Error deleting photo:",n)}}catch(e){console.error("Error processing photo deletion:",e)}}function m(e){let{logId:t,photoUrls:r,userId:m}=e,h=(0,a.useRouter)(),x=(0,i.createClient)(),[f,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[j,v]=(0,s.useState)("");async function y(){b(!0),v("");try{r&&r.length>0&&await u(r,m);let{error:e}=await x.from("grow_logs").delete().eq("id",t);if(e)throw e;h.push("/dashboard/grow-logs"),h.refresh()}catch(e){console.error("Delete error:",e),v(e.message||"Failed to delete grow log. Please try again."),b(!1)}}return f?(0,n.jsx)(c.Z,{className:"p-6 bg-red-50 border-red-200",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(o.Z,{className:"w-5 h-5 text-red-600"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Delete Grow Log?"}),(0,n.jsx)("p",{className:"text-sm text-red-800 mb-4",children:"This action cannot be undone. All photos and data associated with this log will be permanently deleted."}),j&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg",children:(0,n.jsx)("p",{className:"text-sm text-red-700",children:j})}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(d.Button,{variant:"ghost",onClick:()=>{p(!1),v("")},disabled:g,children:"Cancel"}),(0,n.jsxs)(d.Button,{variant:"primary",onClick:y,loading:g,disabled:g,className:"bg-red-600 hover:bg-red-700",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})]})}):(0,n.jsxs)(d.Button,{variant:"ghost",size:"medium",onClick:()=>p(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"Delete"]})}},39849:function(e,t,r){"use strict";r.d(t,{EnvironmentalDataChart:function(){return h}});var n=r(57437),s=r(47625),a=r(21156),o=r(56940),l=r(97059),i=r(62994),d=r(8147),c=r(22190),u=r(54061),m=r(64014);function h(e){let{logs:t}=e,r=t.filter(e=>null!==e.temperature||null!==e.humidity||null!==e.ph_level);if(0===r.length)return null;let h=r.map(e=>({date:(0,m.WU)(new Date(e.log_date),"MMM dd"),temperature:e.temperature||null,humidity:e.humidity||null,ph:e.ph_level||null}));return(0,n.jsx)("div",{className:"w-full h-64 mt-6",children:(0,n.jsx)(s.h,{width:"100%",height:"100%",children:(0,n.jsxs)(a.w,{data:h,margin:{top:5,right:30,left:20,bottom:5},children:[(0,n.jsx)(o.q,{strokeDasharray:"3 3",stroke:"#E5E5E5"}),(0,n.jsx)(l.K,{dataKey:"date",stroke:"#525252",style:{fontSize:"12px"}}),(0,n.jsx)(i.B,{stroke:"#525252",style:{fontSize:"12px"}}),(0,n.jsx)(d.u,{contentStyle:{backgroundColor:"#fff",border:"1px solid #E5E5E5",borderRadius:"0.5rem",padding:"0.5rem"}}),(0,n.jsx)(c.D,{formatter:e=>(0,n.jsx)("span",{className:"text-sm text-neutral-600",children:e})}),h.some(e=>null!==e.temperature)&&(0,n.jsx)(u.x,{type:"monotone",dataKey:"temperature",stroke:"#14B8A6",strokeWidth:2,dot:{fill:"#14B8A6",r:4},name:"Temperature (\xb0F)"}),h.some(e=>null!==e.humidity)&&(0,n.jsx)(u.x,{type:"monotone",dataKey:"humidity",stroke:"#8B5CF6",strokeWidth:2,dot:{fill:"#8B5CF6",r:4},name:"Humidity (%)"}),h.some(e=>null!==e.ph)&&(0,n.jsx)(u.x,{type:"monotone",dataKey:"ph",stroke:"#22C55E",strokeWidth:2,dot:{fill:"#22C55E",r:4},name:"pH Level"})]})})})}},71708:function(e,t,r){"use strict";r.d(t,{GrowthStageChart:function(){return x}});var n=r(57437),s=r(47625),a=r(77031),o=r(56940),l=r(97059),i=r(62994),d=r(8147),c=r(31699),u=r(20407),m=r(64014);let h={Inoculation:"#8B5CF6",Colonization:"#14B8A6",Fruiting:"#22C55E",Harvest:"#F59E0B"};function x(e){let{logs:t}=e,r=Object.entries(t.map(e=>({date:(0,m.WU)(new Date(e.log_date),"MMM dd"),stage:e.growth_stage,fullDate:e.log_date})).reduce((e,t)=>(e[t.stage]=(e[t.stage]||0)+1,e),{})).map(e=>{let[t,r]=e;return{stage:t,count:r,color:h[t]||"#A3A3A3"}});return(0,n.jsx)("div",{className:"w-full h-64",children:(0,n.jsx)(s.h,{width:"100%",height:"100%",children:(0,n.jsxs)(a.v,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[(0,n.jsx)(o.q,{strokeDasharray:"3 3",stroke:"#E5E5E5"}),(0,n.jsx)(l.K,{dataKey:"stage",stroke:"#525252",style:{fontSize:"12px"}}),(0,n.jsx)(i.B,{stroke:"#525252",style:{fontSize:"12px"}}),(0,n.jsx)(d.u,{contentStyle:{backgroundColor:"#fff",border:"1px solid #E5E5E5",borderRadius:"0.5rem",padding:"0.5rem"},formatter:e=>["".concat(e," log").concat(1!==e?"s":""),"Count"]}),(0,n.jsx)(c.$,{dataKey:"count",radius:[8,8,0,0],children:r.map((e,t)=>(0,n.jsx)(u.b,{fill:e.color},"cell-".concat(t)))})]})})})}},84226:function(e,t,r){"use strict";r.d(t,{Button:function(){return i}});var n=r(57437),s=r(2265),a=r(27648),o=r(51817),l=r(47984);let i=(0,s.forwardRef)((e,t)=>{let{variant:r="primary",size:s="medium",loading:i=!1,className:d,children:c,disabled:u,href:m,...h}=e,x=(0,l.cn)("inline-flex items-center justify-center rounded-xl font-medium transition-standard focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-primary-500 text-white shadow-lg shadow-primary-500/25 hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-neutral-100 text-neutral-900 border border-neutral-200 hover:bg-neutral-200 focus:ring-neutral-500",ghost:"bg-transparent text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500"}[r],{small:"px-4 py-2 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"}[s],i&&"cursor-wait",d);return m?(0,n.jsx)(a.default,{href:m,className:x,children:c}):(0,n.jsx)("button",{ref:t,className:x,disabled:u||i,...h,children:i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):c})});i.displayName="Button"},99178:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(57437),s=r(47984);function a(e){let{children:t,hover:r=!1,padding:a="medium",className:o}=e;return(0,n.jsx)("div",{className:(0,s.cn)("bg-white border border-neutral-200 rounded-2xl shadow-sm",{small:"p-4",medium:"p-6 md:p-8",large:"p-8 md:p-12"}[a],r&&"transition-standard hover:border-primary-400 hover:shadow-lg hover:shadow-primary-500/10",o),children:t})}},10970:function(e,t,r){"use strict";r.d(t,{createClient:function(){return s}});var n=r(95452);let s=()=>{{let e="https://oxdknvkltvigixofxpab.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94ZGtudmtsdHZpZ2l4b2Z4cGFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1ODc4NDgsImV4cCI6MjA4MTE2Mzg0OH0.1n3IerXktp8nyc_whCadO972Q9fy5e5U4aM-5cJdzlE";if(!e||!t)throw console.error("❌ Missing Supabase environment variables!"),console.error("URL:",e?"✓":"✗"),console.error("Anon Key:",t?"✓":"✗"),Error("NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables are required")}return(0,n.createClientComponentClient)()}},47984:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(61994),s=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}}},function(e){e.O(0,[972,105,452,14,878,447,374,971,117,744],function(){return e(e.s=69982)}),_N_E=e.O()}]);