(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213,970],{89213:function(e,t,r){Promise.resolve().then(r.bind(r,72580))},72580:function(e,t,r){"use strict";r.d(t,{GrowLogForm:function(){return q}});var a=r(57437),s=r(2265),l=r(99376),o=r(29501),n=r(64014),i=r(10970),d=r(99178),u=r(38068),c=r(70311),h=r(47984);let m=(0,s.forwardRef)((e,t)=>{var r;let{label:s,error:l,className:o,id:n,...i}=e,d=n||"textarea-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-neutral-900 mb-2",children:[s,i.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsx)("textarea",{ref:t,id:d,className:(0,h.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900 placeholder-neutral-400","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed","resize-y min-h-[6rem]",l&&"border-red-300 focus:border-red-400 focus:ring-red-100",o),...i}),l&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),i.maxLength&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-neutral-500 text-right",children:[(null===(r=i.value)||void 0===r?void 0:r.toString().length)||0," / ",i.maxLength," characters"]})]})});m.displayName="Textarea";var p=r(84226),g=r(79205);let x=(0,g.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),b=(0,g.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),v=(0,g.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function f(e){let{photos:t,onChange:r}=e,[l,o]=(0,s.useState)(!1),[n,i]=(0,s.useState)([]),d=(0,s.useRef)(null);function u(e){let a=[],s=[];e.forEach(e=>{let t=e.type.startsWith("image/")?e.size>10485760?"File size must be less than 10MB":null:"File must be an image (PNG, JPG, JPEG)";t?a.push("".concat(e.name,": ").concat(t)):s.push(e)}),a.length>0&&(i(a),setTimeout(()=>i([]),5e3)),s.length>0&&r([...t,...s])}return(0,a.jsxs)("div",{className:"space-y-4",children:[n.length>0&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:n.map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-red-600",children:e},t))}),(0,a.jsxs)("div",{className:(0,h.cn)("border-2 border-dashed rounded-xl p-12 text-center transition-standard",l?"border-primary-500 bg-primary-50":"border-neutral-300 hover:border-neutral-400"),onDragOver:e=>{e.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:function(e){e.preventDefault(),o(!1),u(Array.from(e.dataTransfer.files))},children:[(0,a.jsx)(x,{className:"w-12 h-12 mx-auto text-neutral-400 mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-2 font-medium",children:"Drag & drop photos here, or click to select"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-4",children:"PNG, JPG, JPEG up to 10MB each"}),(0,a.jsx)("input",{ref:d,type:"file",multiple:!0,accept:"image/png,image/jpeg,image/jpg",className:"hidden",id:"file-upload",onChange:function(e){u(Array.from(e.target.files||[])),d.current&&(d.current.value="")}}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,a.jsxs)(p.Button,{type:"button",variant:"secondary",className:"mt-2",onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)(b,{className:"w-4 h-4 mr-2"}),"Select Files"]})})]}),t.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-neutral-100",children:(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(s+1),className:"w-full h-full object-cover"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{r(t.filter((e,t)=>t!==s))},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-red-600","aria-label":"Remove photo",children:(0,a.jsx)(v,{className:"w-4 h-4"})}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-500 truncate",children:e.name})]},s))})]})}var y=r(48461),j=r.n(y);function w(e){let{newPhotos:t,existingPhotos:r,onNewPhotosChange:l,onExistingPhotosChange:o}=e,[n,i]=(0,s.useState)(!1),[d,u]=(0,s.useState)([]),c=(0,s.useRef)(null);function m(e){let r=[],a=[];e.forEach(e=>{let t=e.type.startsWith("image/")?e.size>10485760?"File size must be less than 10MB":null:"File must be an image (PNG, JPG, JPEG)";t?r.push("".concat(e.name,": ").concat(t)):a.push(e)}),r.length>0&&(u(r),setTimeout(()=>u([]),5e3)),a.length>0&&l([...t,...a])}return(0,a.jsxs)("div",{className:"space-y-4",children:[d.length>0&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:d.map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-red-600",children:e},t))}),r.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600 mb-3",children:"Existing Photos"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-neutral-100",children:(0,a.jsx)(j(),{src:e,alt:"Existing photo ".concat(t+1),fill:!0,className:"object-cover",sizes:"(max-width: 640px) 50vw, 25vw"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{o(r.filter((e,r)=>r!==t))},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-red-600","aria-label":"Remove photo",children:(0,a.jsx)(v,{className:"w-4 h-4"})})]},t))})]}),(0,a.jsxs)("div",{className:(0,h.cn)("border-2 border-dashed rounded-xl p-12 text-center transition-standard",n?"border-primary-500 bg-primary-50":"border-neutral-300 hover:border-neutral-400"),onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>i(!1),onDrop:function(e){e.preventDefault(),i(!1),m(Array.from(e.dataTransfer.files))},children:[(0,a.jsx)(x,{className:"w-12 h-12 mx-auto text-neutral-400 mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-2 font-medium",children:"Drag & drop photos here, or click to select"}),(0,a.jsx)("p",{className:"text-sm text-neutral-500 mb-4",children:"PNG, JPG, JPEG up to 10MB each"}),(0,a.jsx)("input",{ref:c,type:"file",multiple:!0,accept:"image/png,image/jpeg,image/jpg",className:"hidden",id:"file-upload",onChange:function(e){m(Array.from(e.target.files||[])),c.current&&(c.current.value="")}}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,a.jsxs)(p.Button,{type:"button",variant:"secondary",className:"mt-2",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)(b,{className:"w-4 h-4 mr-2"}),"Select Files"]})})]}),t.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-600 mb-3",children:"New Photos"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((e,r)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-neutral-100",children:(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(r+1),className:"w-full h-full object-cover"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{l(t.filter((e,t)=>t!==r))},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center hover:bg-red-600","aria-label":"Remove photo",children:(0,a.jsx)(v,{className:"w-4 h-4"})}),(0,a.jsx)("p",{className:"mt-1 text-xs text-neutral-500 truncate",children:e.name})]},r))})]})]})}function N(e){var t,r,a;let s=60;return(null===(t=e.substrate_ratio)||void 0===t?void 0:t.trim())&&(s+=10),(null===(r=e.inoculation_details)||void 0===r?void 0:r.trim())&&(s+=10),void 0!==e.light_hours_daily&&null!==e.light_hours_daily&&(s+=10),(null===(a=e.tek_method)||void 0===a?void 0:a.trim())&&(s+=10),e.tek_notes&&e.tek_notes.length>100&&(s+=15),e.notes&&e.notes.length>50&&(s+=5),e.photos&&e.photos.length>0&&(s+=10),Math.min(s,100)}async function _(e,t){let r=(0,i.createClient)(),a=[];for(let l of e)try{var s;let e=Date.now(),o=(null===(s=l.name.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"jpg",n="".concat(e,"-").concat(Math.random().toString(36).substring(7),".").concat(o),i="".concat(t,"/").concat(n),{error:d}=await r.storage.from("grow-photos").upload(i,l,{cacheControl:"3600",upsert:!1});if(d){console.error("Upload error:",d);continue}let{data:{publicUrl:u}}=r.storage.from("grow-photos").getPublicUrl(i);u&&a.push(u)}catch(e){console.error("Error uploading photo:",e)}return a}var k=r(66076);let C=(0,g.Z)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),S=(0,g.Z)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),P=(0,g.Z)("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),M=(0,g.Z)("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),I=(0,g.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function q(e){var t,r,h,g,x,b;let{mode:v,initialData:y}=e,j=(0,l.useRouter)(),q=(0,i.createClient)(),[F,G]=(0,s.useState)(!1),[L,D]=(0,s.useState)(0),[E,Z]=(0,s.useState)([]),[B,O]=(0,s.useState)((null==y?void 0:y.photos)||[]),[A,R]=(0,s.useState)(""),T=y?{growth_stage:y.growth_stage,log_date:(0,n.WU)(new Date(y.log_date),"yyyy-MM-dd"),strain:y.strain,substrate:y.substrate,substrate_ratio:y.substrate_ratio||"",inoculation_method:y.inoculation_method,inoculation_details:y.inoculation_details||"",growing_method:y.growing_method,tek_method:y.tek_method||"",tek_notes:y.tek_notes||"",temperature:y.temperature||void 0,humidity:y.humidity||void 0,ph_level:y.ph_level||void 0,weight:y.weight||void 0,light_hours_daily:y.light_hours_daily||void 0,notes:y.notes||"",photos:y.photos||[]}:{growth_stage:"",log_date:(0,n.WU)(new Date,"yyyy-MM-dd"),strain:"",substrate:"",inoculation_method:"",growing_method:""},{register:U,handleSubmit:z,watch:J,control:H,formState:{errors:W},setValue:K}=(0,o.cI)({defaultValues:T}),Q=J();async function V(e){G(!0),R("");try{let{data:{user:t}}=await q.auth.getUser();if(!t){R("You must be logged in to create a grow log"),G(!1);return}let r=[];if(E.length>0&&(r=await _(E,t.id),0===r.length&&E.length>0)){R("Failed to upload photos. Please try again."),G(!1);return}let a=[...B,...r],s=N({...e,photos:a}),l={growth_stage:e.growth_stage,log_date:e.log_date,strain:e.strain,substrate:e.substrate,inoculation_method:e.inoculation_method,growing_method:e.growing_method,data_completeness_score:s};if(e.substrate_ratio?l.substrate_ratio=e.substrate_ratio:l.substrate_ratio=null,e.inoculation_details?l.inoculation_details=e.inoculation_details:l.inoculation_details=null,void 0!==e.temperature&&null!==e.temperature?l.temperature=parseFloat(e.temperature.toString()):l.temperature=null,void 0!==e.humidity&&null!==e.humidity?l.humidity=parseFloat(e.humidity.toString()):l.humidity=null,void 0!==e.ph_level&&null!==e.ph_level?l.ph_level=parseFloat(e.ph_level.toString()):l.ph_level=null,void 0!==e.weight&&null!==e.weight?l.weight=parseFloat(e.weight.toString()):l.weight=null,void 0!==e.light_hours_daily&&null!==e.light_hours_daily?l.light_hours_daily=parseFloat(e.light_hours_daily.toString()):l.light_hours_daily=null,e.tek_method?l.tek_method=e.tek_method:l.tek_method=null,e.tek_notes?l.tek_notes=e.tek_notes:l.tek_notes=null,e.notes?l.notes=e.notes:l.notes=null,l.photos=a.length>0?a:null,"edit"===v&&(null==y?void 0:y.id)){let{error:e}=await q.from("grow_logs").update(l).eq("id",y.id).eq("user_id",t.id);if(e){console.error("Database error:",e),R(e.message||"Failed to update grow log. Please try again."),G(!1);return}j.push("/dashboard/grow-logs/".concat(y.id)),j.refresh()}else{l.user_id=t.id;let{data:e,error:r}=await q.from("grow_logs").insert(l).select().single();if(r){console.error("Database error:",r),R(r.message||"Failed to save grow log. Please try again."),G(!1);return}let a=s>=80?25:10,{error:o}=await q.rpc("add_user_points",{p_user_id:t.id,p_points:a});o&&console.error("Points error:",o),j.push("/dashboard/grow-logs"),j.refresh()}}catch(e){console.error("Submit error:",e),R(e.message||"An unexpected error occurred. Please try again."),G(!1)}}return(0,s.useEffect)(()=>{let e="edit"===v?[...B,...E.map(()=>"has-photos")]:E.map(()=>"has-photos");D(N({...Q,photos:e.length>0?e:[]}))},[Q,E,B,v]),(0,a.jsxs)("form",{onSubmit:z(V),className:"space-y-8",children:[A&&(0,a.jsx)(d.Z,{className:"p-4 bg-red-50 border-red-200",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:A})}),(0,a.jsx)(d.Z,{className:"p-6 bg-primary-50 border-primary-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-primary-900",children:"Data Completeness"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-primary-900",children:[L,"%"]})]}),(0,a.jsx)("div",{className:"h-3 bg-white rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary-600 transition-all duration-300",style:{width:"".concat(L,"%")}})}),(0,a.jsx)("p",{className:"text-xs text-primary-800",children:L>=80?"Excellent! You'll earn 25 points for this complete log.":"Complete more fields to earn 25 points (currently 10 points)"})]})}),(0,a.jsxs)(d.Z,{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Required Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(o.Qr,{name:"growth_stage",control:H,rules:{required:"Growth stage is required"},render:e=>{var t;let{field:r}=e;return(0,a.jsx)(c.P,{label:"Growth Stage",options:k.cu.map(e=>({value:e,label:e})),required:!0,error:null===(t=W.growth_stage)||void 0===t?void 0:t.message,value:r.value||"",onChange:e=>r.onChange(e)})}}),(0,a.jsx)(u.I,{type:"date",label:"Log Date",required:!0,error:null===(t=W.log_date)||void 0===t?void 0:t.message,...U("log_date",{required:"Date is required"})}),(0,a.jsx)(o.Qr,{name:"strain",control:H,rules:{required:"Strain is required"},render:e=>{var t;let{field:r}=e;return(0,a.jsx)(c.P,{label:"Strain",options:k.Hk.map(e=>({value:e,label:e})),required:!0,error:null===(t=W.strain)||void 0===t?void 0:t.message,value:r.value||"",onChange:e=>r.onChange(e)})}}),(0,a.jsx)(o.Qr,{name:"substrate",control:H,rules:{required:"Substrate is required"},render:e=>{var t;let{field:r}=e;return(0,a.jsx)(c.P,{label:"Substrate",options:k.jp.map(e=>({value:e,label:e})),required:!0,error:null===(t=W.substrate)||void 0===t?void 0:t.message,value:r.value||"",onChange:e=>r.onChange(e)})}}),(0,a.jsx)(o.Qr,{name:"inoculation_method",control:H,rules:{required:"Inoculation method is required"},render:e=>{var t;let{field:r}=e;return(0,a.jsx)(c.P,{label:"Inoculation Method",options:k.ny.map(e=>({value:e,label:e})),required:!0,error:null===(t=W.inoculation_method)||void 0===t?void 0:t.message,value:r.value||"",onChange:e=>r.onChange(e)})}}),(0,a.jsx)(o.Qr,{name:"growing_method",control:H,rules:{required:"Growing method is required"},render:e=>{var t;let{field:r}=e;return(0,a.jsx)(c.P,{label:"Growing Method",options:k.iJ.map(e=>({value:e,label:e})),required:!0,error:null===(t=W.growing_method)||void 0===t?void 0:t.message,value:r.value||"",onChange:e=>r.onChange(e)})}})]})]}),(0,a.jsxs)(d.Z,{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Optional Details (Boost your completeness score!)"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(u.I,{label:"Substrate Ratio",placeholder:"e.g., 5:1:1 (coco:verm:gypsum)",...U("substrate_ratio")}),(0,a.jsx)(u.I,{label:"Inoculation Details",placeholder:"e.g., 2cc per jar, 10% spawn rate",...U("inoculation_details")}),(0,a.jsx)(u.I,{type:"number",step:"0.1",label:"Temperature (\xb0F)",placeholder:"e.g., 75.5",icon:(0,a.jsx)(C,{className:"w-5 h-5"}),...U("temperature",{valueAsNumber:!0,min:{value:0,message:"Temperature must be positive"}}),error:null===(r=W.temperature)||void 0===r?void 0:r.message}),(0,a.jsx)(u.I,{type:"number",step:"0.1",label:"Humidity (%)",placeholder:"e.g., 90.0",icon:(0,a.jsx)(S,{className:"w-5 h-5"}),...U("humidity",{valueAsNumber:!0,min:{value:0,message:"Humidity must be positive"},max:{value:100,message:"Humidity cannot exceed 100%"}}),error:null===(h=W.humidity)||void 0===h?void 0:h.message}),(0,a.jsx)(u.I,{type:"number",step:"0.1",min:"0",max:"14",label:"pH Level",placeholder:"e.g., 7.0",icon:(0,a.jsx)(P,{className:"w-5 h-5"}),...U("ph_level",{valueAsNumber:!0,min:{value:0,message:"pH must be between 0 and 14"},max:{value:14,message:"pH must be between 0 and 14"}}),error:null===(g=W.ph_level)||void 0===g?void 0:g.message}),(0,a.jsx)(u.I,{type:"number",step:"0.01",label:"Weight (grams)",placeholder:"e.g., 150.5",icon:(0,a.jsx)(M,{className:"w-5 h-5"}),...U("weight",{valueAsNumber:!0,min:{value:0,message:"Weight must be positive"}}),error:null===(x=W.weight)||void 0===x?void 0:x.message}),(0,a.jsx)(u.I,{type:"number",step:"0.1",min:"0",max:"12",label:"Light Hours per Day",placeholder:"e.g., 12.0",icon:(0,a.jsx)(I,{className:"w-5 h-5"}),...U("light_hours_daily",{valueAsNumber:!0,min:{value:0,message:"Light hours must be between 0 and 12"},max:{value:12,message:"Light hours must be between 0 and 12"}}),error:null===(b=W.light_hours_daily)||void 0===b?void 0:b.message})]})]}),(0,a.jsxs)(d.Z,{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"TEK & Technique"}),(0,a.jsx)(o.Qr,{name:"tek_method",control:H,render:e=>{let{field:t}=e;return(0,a.jsx)(c.P,{label:"TEK Method",options:[{value:"",label:"Select a TEK..."},...k.KN.map(e=>({value:e,label:e}))],value:t.value||"",onChange:e=>t.onChange(e)})}}),(0,a.jsx)(m,{label:"Technique Notes",placeholder:"Share your specific modifications, ratios, or observations. Detailed notes (>100 chars) earn bonus points!",rows:6,maxLength:1e3,...U("tek_notes")})]}),(0,a.jsxs)(d.Z,{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Photos"}),(0,a.jsx)("p",{className:"text-sm text-neutral-600",children:"Upload photos of your grow. Each photo adds to your completeness score!"}),"edit"===v?(0,a.jsx)(w,{newPhotos:E,existingPhotos:B,onNewPhotosChange:Z,onExistingPhotosChange:O}):(0,a.jsx)(f,{photos:E,onChange:Z})]}),(0,a.jsxs)(d.Z,{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"General Notes"}),(0,a.jsx)(m,{placeholder:"Add any additional notes about this grow log entry. Notes over 50 characters earn bonus points!",rows:4,maxLength:2e3,...U("notes")})]}),(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,a.jsx)(p.Button,{type:"button",variant:"ghost",onClick:()=>j.back(),disabled:F,children:"Cancel"}),(0,a.jsx)(p.Button,{type:"submit",variant:"primary",loading:F,disabled:F,children:"create"===v?"Create Log":"Save Changes"})]})]})}},84226:function(e,t,r){"use strict";r.d(t,{Button:function(){return i}});var a=r(57437),s=r(2265),l=r(27648),o=r(51817),n=r(47984);let i=(0,s.forwardRef)((e,t)=>{let{variant:r="primary",size:s="medium",loading:i=!1,className:d,children:u,disabled:c,href:h,...m}=e,p=(0,n.cn)("inline-flex items-center justify-center rounded-xl font-medium transition-standard focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-primary-500 text-white shadow-lg shadow-primary-500/25 hover:bg-primary-600 focus:ring-primary-500",secondary:"bg-neutral-100 text-neutral-900 border border-neutral-200 hover:bg-neutral-200 focus:ring-neutral-500",ghost:"bg-transparent text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500"}[r],{small:"px-4 py-2 text-sm",medium:"px-6 py-3 text-base",large:"px-8 py-4 text-lg"}[s],i&&"cursor-wait",d);return h?(0,a.jsx)(l.default,{href:h,className:p,children:u}):(0,a.jsx)("button",{ref:t,className:p,disabled:c||i,...m,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):u})});i.displayName="Button"},99178:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(57437),s=r(47984);function l(e){let{children:t,hover:r=!1,padding:l="medium",className:o}=e;return(0,a.jsx)("div",{className:(0,s.cn)("bg-white border border-neutral-200 rounded-2xl shadow-sm",{small:"p-4",medium:"p-6 md:p-8",large:"p-8 md:p-12"}[l],r&&"transition-standard hover:border-primary-400 hover:shadow-lg hover:shadow-primary-500/10",o),children:t})}},38068:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var a=r(57437),s=r(2265),l=r(47984);let o=(0,s.forwardRef)((e,t)=>{let{label:r,error:s,icon:o,className:n,id:i,...d}=e,u=i||"input-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsxs)("label",{htmlFor:u,className:"block text-sm font-medium text-neutral-900 mb-2",children:[r,d.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[o&&(0,a.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",children:o}),(0,a.jsx)("input",{ref:t,id:u,className:(0,l.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900 placeholder-neutral-400","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed",o&&"pl-10",s&&"border-red-300 focus:border-red-400 focus:ring-red-100",n),...d})]}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s})]})});o.displayName="Input"},70311:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});var a=r(57437),s=r(2265);let l=(0,r(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var o=r(47984);let n=(0,s.forwardRef)((e,t)=>{let{label:r,error:s,options:n,className:i,id:d,onChange:u,value:c,...h}=e,m=d||"select-".concat(Math.random().toString(36).substr(2,9));return(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsxs)("label",{htmlFor:m,className:"block text-sm font-medium text-neutral-900 mb-2",children:[r,h.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{ref:t,id:m,value:c,className:(0,o.cn)("w-full bg-white border border-neutral-200 rounded-xl px-4 py-3","text-neutral-900","transition-standard","focus:outline-none focus:border-primary-400 focus:ring-2 focus:ring-primary-100","hover:border-neutral-300","disabled:bg-neutral-100 disabled:cursor-not-allowed","appearance-none pr-10",s&&"border-red-300 focus:border-red-400 focus:ring-red-100",i),onChange:e=>{u&&u(e.target.value)},...h,children:n.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-400",children:(0,a.jsx)(l,{className:"w-5 h-5"})})]}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s})]})});n.displayName="Select"},66076:function(e,t,r){"use strict";r.d(t,{Hk:function(){return s},KN:function(){return i},cu:function(){return a},iJ:function(){return n},jp:function(){return l},ny:function(){return o}});let a=["Inoculation","Colonization","Fruiting","Harvest"],s=["Blue Oyster","Golden Oyster","Pink Oyster","King Oyster","Phoenix Oyster","Shiitake","Lion's Mane","Reishi","Maitake","Enoki","Chestnut","Wine Cap","Turkey Tail","Button/Portobello","Nameko","Pioppino","Other"],l=["Coco Coir","Coco+Verm","CVG","Manure-based","Straw","Hardwood","Master's Mix","BRF","Rye Grain","Wild Bird Seed","Uncle Ben's","Popcorn","Other"],o=["Liquid Culture","Spore Syringe","Agar Transfer","G2G","Spore Print","Clone","Sawdust Spawn","Other"],n=["Monotub","SGFC","Fruiting Bag","Martha Tent","Shoebox","Hydroponics","Open Air","Other"],i=["PF Tek","Uncle Ben's","G2G","Agar","Liquid Culture","Shoebox","Broke Boi","BRF Cakes","Bulk Substrate","Monotub Tek","Other"]},10970:function(e,t,r){"use strict";r.d(t,{createClient:function(){return s}});var a=r(95452);let s=()=>{{let e="https://oxdknvkltvigixofxpab.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94ZGtudmtsdHZpZ2l4b2Z4cGFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1ODc4NDgsImV4cCI6MjA4MTE2Mzg0OH0.1n3IerXktp8nyc_whCadO972Q9fy5e5U4aM-5cJdzlE";if(!e||!t)throw console.error("❌ Missing Supabase environment variables!"),console.error("URL:",e?"✓":"✗"),console.error("Anon Key:",t?"✓":"✗"),Error("NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables are required")}return(0,a.createClientComponentClient)()}},47984:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var a=r(61994),s=r(53335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},48461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return n}});let a=r(47043),s=r(55346),l=r(65878),o=a._(r(5084));function n(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=l.Image}}]);